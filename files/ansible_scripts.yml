# This playbook prepares images for the Nextflow Ed-DASH course. For EdGe EC2 images,
# just start any number of regular training VMs, and check they exist with:
#
#  $ ansible-inventory --graph --verbose
#
# If other VMs are running then you'll need to do something smarter.
# https://codeforgeek.com/install-atom-editor-ubuntu-14-04/
# https://docs.ansible.com/ansible/latest/collections/ansible/builtin/apt_module.html

- hosts: dash
  become: yes
  become_user: training
  tasks:
    - name: Clone training scripts
      ansible.builtin.git:
        repo: https://github.com/ggrimes/nf-training
        dest: ~/Downloads/nf-training
        single_branch: yes
        version: main

    - name: Link scripts
      shell:
        executable: /bin/bash
        chdir: ~/
        cmd: |
          ln -s ~/Downloads/nf-training/scripts scripts
          cp scripts/introduction/wc.nf .
          
